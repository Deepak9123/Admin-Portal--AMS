<div class="enquiry-wrapper"> 
  <div class="main-content">
    <div class="container-fluid">
      <div class="card">
        <div class="card-header card-header-themed d-flex justify-content-between">
          <h4 class="card-title">Enquiry's Management</h4>
        </div>

        <!-- FILTERS -->
        <div class="mt-3 filter-accordian">
          <mat-accordion>
            <mat-expansion-panel>
              <mat-expansion-panel-header>
                <mat-panel-title>Search Filters</mat-panel-title>
              </mat-expansion-panel-header>
  <br>
              <div class="row px-3">
                <div class="col-md-4">
                  <mat-form-field class="example-full-width" appearance="outline">
                    <input matInput placeholder="Enquiry ID" [(ngModel)]="filter.enquiryFormId">
                  </mat-form-field>
                </div>
                <div class="col-md-4">
                  <mat-form-field class="example-full-width" appearance="outline">
                    <input matInput placeholder="Student Name" [(ngModel)]="filter.studentName">
                  </mat-form-field>
                </div>
                <div class="col-md-4">
                  <mat-form-field class="example-full-width" appearance="outline">
                    <input matInput placeholder="Adhar Card No" [(ngModel)]="filter.adharCardNo">
                  </mat-form-field>
                </div>
              </div>

              <div class="text-end mt-2">
                <button class="btn btn-outline-secondary me-2" (click)="clearSearch()">Clear</button>
                <button class="btn btn-outline-success me-2" (click)="searchEnquiries()">Search</button>
              </div>
            </mat-expansion-panel>
          </mat-accordion>
        </div>

        <!-- ACTION BUTTONS -->
        <div class="d-flex justify-content-between align-items-center mt-3 px-3">
          <mat-checkbox [(ngModel)]="selectAll" (change)="toggleAllSelection()">Select All</mat-checkbox>
          <div>
            <button class="btn btn-outline-success me-2">Export</button>

            <a class="btn btn-outline-primary" href="http://localhost:4200/#/" target="_blank">Create</a>

            <!-- <button class="btn btn-outline-primary" href="http://localhost:4200/#/" >Create</button> -->
          </div>
        </div>

        <!-- TABLE -->
        <div class="card-body table-responsive">
          <table class="table table-bordered text-center">
            <thead class="table-light">
              <tr>
                <th>Select</th>
                <th>Sl. No</th>
                <th>Enquiry ID</th>
                <th>Student Name</th>
                <th>Adhar No</th>
                <th>Passport Photo</th>
                <th>Family Photo</th>
                <th>DOB</th>
                <th>Email</th>
                <th>Father's Name</th>
                <th>Mother's Name</th>
                <th>Created At</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let enquiry of enquiryList; let i = index">
                <td>
                  <mat-checkbox [(ngModel)]="enquiry.selected"></mat-checkbox>
                </td>
                <td>{{ i + 1 + (pageIndex - 1) * pageSize }}</td>
                <td>{{ enquiry.enquiryFormId }}</td>
                <td>{{ enquiry.studentName }}</td>
                <td>{{ enquiry.adharCardNo }}</td>
                <td>
                  <a [href]="enquiry.passportPhoto" target="_blank">
                    <mat-icon>visibility</mat-icon>
                  </a>
                </td>
                <td>
                  <a [href]="enquiry.familyPhoto" target="_blank">
                    <mat-icon>visibility</mat-icon>
                  </a>
                </td>
                <td>{{ enquiry.dob | date: 'shortDate' }}</td>
                <td>{{ enquiry.email }}</td>
                <td>{{ enquiry.fatherName }}</td>
                <td>{{ enquiry.motherName }}</td>
                <td>{{ enquiry.createdAt | date: 'short' }}</td>
              </tr>
            </tbody>
          </table>

          <!-- No Data -->
          <div *ngIf="enquiryList.length === 0" class="text-center py-4">
            <h5>No data found</h5>
          </div>

          <!-- PAGINATION -->
          <mat-paginator
            [length]="totalRecords"
            [pageSize]="pageSize"
            [pageSizeOptions]="pageSizeOptions"
            [pageIndex]="pageIndex - 1"
            (page)="handlePageEvent($event)">
          </mat-paginator>
        </div>
      </div>
    </div>
  </div>
</div>
